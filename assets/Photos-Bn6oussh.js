const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ImageLazyPreview-Cp-Yq5MW.js","./index-CsQMy14F.js","./index-9SBFHPtm.css","./MyApp-DnJEb2pA.js","./index-Cx_qBVxI.js","./EyeOutlined-Cb8FaTdA.js","./addEventListener-CtwiUggX.js"])))=>i.map(i=>d[i]);
import{aA as L,aH as O,r as y,aJ as _,aL as k,aS as F}from"./index-CsQMy14F.js";import{C as T}from"./Collection-HsjKZwIL.js";import{k as R,p as S,q as P,B as U,g as W}from"./MyApp-DnJEb2pA.js";import{S as N}from"./index-DeiB9NpS.js";import{L as q}from"./index-BkdUpAfZ.js";import"./index-DBdoTHs6.js";import"./file-download-CRneYEGd.js";import"./index-g2iOrP0o.js";import"./Dropdown-T0PZ1LmY.js";import"./PurePanel-DI5D6CFd.js";import"./index-BTyXMOJz.js";import"./index-BM1pPPhJ.js";import"./index-BmSnljIR.js";import"./EyeOutlined-Cb8FaTdA.js";import"./SearchOutlined-CqGKY-kh.js";import"./index-lxS6W_4b.js";import"./Pagination-DKxVYLvV.js";import"./useBreakpoint-Cpuu8BlP.js";import"./responsiveObserver-D7pXVsDA.js";import"./row-DIL6LaJF.js";var b=(i=>(i.OWNER="5",i.TAGGED="4",i))(b||{});async function B({id:i,count:t=8,cursor:n="",type:a="5"}){const c=await R({doc_id:"4820192058049838",fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:"ProfileCometAppCollectionPhotosRendererPaginationQuery",variables:{count:t,cursor:n,scale:1,id:btoa(`app_collection:${i}:2305272732:${a}`)}});let m=S(c),{edges:u=[],page_info:d}=L(m)||{};return u.map(o=>{var l,s,e,r,p,f,h,C,v,w,E,x,I,j,M;return{id:atob((l=o==null?void 0:o.node)==null?void 0:l.id).split(":").pop(),url:(s=o==null?void 0:o.node)==null?void 0:s.url,thumbnail:(r=(e=o==null?void 0:o.node)==null?void 0:e.image)==null?void 0:r.uri,image:(h=(f=(p=o==null?void 0:o.node)==null?void 0:p.node)==null?void 0:f.viewer_image)==null?void 0:h.uri,width:(w=(v=(C=o==null?void 0:o.node)==null?void 0:C.node)==null?void 0:v.viewer_image)==null?void 0:w.width,height:(I=(x=(E=o==null?void 0:o.node)==null?void 0:E.node)==null?void 0:x.viewer_image)==null?void 0:I.height,accessibility_caption:(M=(j=o==null?void 0:o.node)==null?void 0:j.node)==null?void 0:M.accessibility_caption,cursor:o==null?void 0:o.cursor,photo_type:a}})}async function Q({id:i,count:t=8,cursor:n=""}){var d,o,l;const a=await R({doc_id:"6022153214500431",fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:"GroupsCometMediaPhotosTabGridQuery",variables:{count:t,cursor:n,scale:1,id:i}}),c=S(a);console.log(c);const{edges:m=[],page_info:u}=((l=(o=(d=c==null?void 0:c.data)==null?void 0:d.node)==null?void 0:o.group_mediaset)==null?void 0:l.media)||{};return m.map(s=>{var e,r,p,f,h,C,v,w,E,x,I;return{id:(e=s==null?void 0:s.node)==null?void 0:e.id,url:(r=s==null?void 0:s.node)==null?void 0:r.url,thumbnail:(f=(p=s==null?void 0:s.node)==null?void 0:p.image)==null?void 0:f.uri,image:(C=(h=s==null?void 0:s.node)==null?void 0:h.viewer_image)==null?void 0:C.uri,width:(w=(v=s==null?void 0:s.node)==null?void 0:v.viewer_image)==null?void 0:w.width,height:(x=(E=s==null?void 0:s.node)==null?void 0:E.viewer_image)==null?void 0:x.height,accessibility_caption:(I=s==null?void 0:s.node)==null?void 0:I.accessibility_caption,cursor:s==null?void 0:s.cursor}})}async function A(i){var c,m,u;const t=await R({fb_api_req_friendly_name:"CometPhotoRootContentQuery",variables:{UFI2CommentsProvider_commentsKey:"CometPhotoRootQuery",feedbackSource:65,feedLocation:"COMET_MEDIA_VIEWER",isMediaset:!1,nodeID:i,privacySelectorRenderLocation:"COMET_MEDIA_VIEWER",renderLocation:"permalink",scale:2,useDefaultActor:!1,useHScroll:!1,focusCommentID:null,displayCommentsContextEnableComment:null,displayCommentsContextIsAdPreview:null,displayCommentsContextIsAggregatedShare:null,displayCommentsContextIsStorySet:null,displayCommentsFeedbackContext:null,__relay_internal__pv__CometUFIReactionEnableShortNamerelayprovider:!0,__relay_internal__pv__CometUFIShareActionMigrationrelayprovider:!1,__relay_internal__pv__CometUFIReactionsEnableShortNamerelayprovider:!1,__relay_internal__pv__CometImmersivePhotoCanUserDisable3DMotionrelayprovider:!1},doc_id:"7830475950340566"}),n=S(((c=t==null?void 0:t.split(`
`))==null?void 0:c[0])||"{}"),a=((m=n==null?void 0:n.data)==null?void 0:m.currMedia)||{};return{id:i,url:(u=a.creation_story)==null?void 0:u.url,accessibility_caption:a.accessibility_caption,image:a.image.uri,width:a.image.width,height:a.image.height,thumbnail:a.image.uri}}const H=y.lazy(()=>F(()=>import("./ImageLazyPreview-Cp-Yq5MW.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),G={[b.OWNER]:{en:"👤 Owner",vi:"👤 Chính chủ"},[b.TAGGED]:{en:"📌 Tagged",vi:"📌 Được tag"}};function mo({target:i}){const{ti:t}=O(),[n,a]=y.useState(b.OWNER);y.useEffect(()=>{i!=null&&i.id&&a(b.OWNER)},[i==null?void 0:i.id]);const c=y.useCallback(async(o,l)=>{var s,e;if(!(!(i!=null&&i.id)||!(i!=null&&i.type)))if(i.type===P.Group){const r=l||((s=o==null?void 0:o[(o==null?void 0:o.length)-1])==null?void 0:s.cursor)||"";return await Q({id:i.id,cursor:r})}else{const r=o==null?void 0:o.filter(h=>h.photo_type===n),p=l||((e=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:e.cursor)||"";return await B({id:i.id,cursor:p,type:n})}},[i,n]),m=y.useCallback((o,l)=>(i==null?void 0:i.type)!==P.Group&&_.jsx(U,{count:t({en:"New",vi:"Mới"}),color:"purple",style:{color:"white"},children:_.jsx(N,{disabled:l,value:n,onChange:a,style:{width:"150px"},children:Object.entries(b).map(([s,e])=>_.jsx(N.Option,{value:e,children:t(G[e])},s))})}),[n,t]),u=y.useCallback(o=>_.jsxs(q.Item,{className:"show-on-hover-trigger",children:[_.jsx(H,{src:o.thumbnail,alt:o.accessibility_caption,width:150,height:150,style:{objectFit:"cover",borderRadius:"10px"},cacheId:"photos."+o.id,getPreview:()=>o.image||A(o.id).then(l=>l.image)}),_.jsx(k,{type:"default",icon:_.jsx("i",{className:"fa-solid fa-up-right-from-square"}),style:{position:"absolute",bottom:10,right:10},className:"show-on-hover-item",target:"_blank",href:W(o.id)})]}),[]),d=y.useCallback(async(o,l)=>{if(!o.image&&(i==null?void 0:i.type)===P.Group){const s=await A(o.id);o.image=s.image||s.thumbnail||o.thumbnail}return{url:o.image,name:o.id+".jpg"}},[i==null?void 0:i.id]);return _.jsx(T,{collectionName:(i==null?void 0:i.name)+" - Photos - "+t(G[n]),fetchNext:c,renderItem:u,downloadItem:d,headerButtons:m,getItemCursor:o=>o.cursor||"",rowKey:o=>o.id})}export{mo as default};
