const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VideoViewer-CtMK-Ysl.js","./index-CKHJa6H8.js","./index-9SBFHPtm.css","./videos-DPN3OhEy.js","./MyApp-DmnFYXMb.js","./VideoWithMuted-kDLduKat.js","./PostMediaset-BlsZEMKP.js","./Collection-aQM3HCB9.js","./index-D9yJ61K3.js","./file-download-C5xyVAi3.js","./index-DhvFX8qt.js","./Dropdown-rGtWKJHe.js","./PurePanel-CqHXrOsk.js","./index-BjmMRE_R.js","./index-CeMuHsOx.js","./index-C6-fmtr1.js","./EyeOutlined-CgV8UoEr.js","./SearchOutlined-CdQkKFhK.js","./index-NNF54mwi.js","./Pagination-C-O9TTNX.js","./useBreakpoint-CY4yI6XJ.js","./responsiveObserver-CXhvU71l.js","./index-Cb3stYbZ.js","./row-nvkmIBbn.js","./index-DGHuNzgt.js","./icons-BfNdBY4c.js","./index-BZcv6KUq.js"])))=>i.map(i=>d[i]);
import{aG as q,b0 as X,r as $,b8 as P,aI as e,bn as R,ba as K,a$ as Q,aK as h,$ as D,aR as M,b5 as v}from"./index-CKHJa6H8.js";import{b as G,c as I,P as C,S as c,d as J,g as Y,B as Z,H as w,T as g,a as ee,I as _,h as te}from"./MyApp-DmnFYXMb.js";import{d as ie}from"./dayjs.min-NC4fBOtL.js";import ne from"./MyTable-BCxLbuA1.js";import{E as ae}from"./ExportButton-Cpg97lfX.js";import{A as se}from"./index-Cuge2M-s.js";import{I as F}from"./index-D6_9vR6G.js";import{T as p}from"./index-C6-fmtr1.js";import{R as oe}from"./row-nvkmIBbn.js";import{I as re}from"./index-CeMuHsOx.js";import{D as le}from"./index-Cp4Op_oM.js";import{S as j}from"./index-Cb3stYbZ.js";import"./index-D9yJ61K3.js";import"./Table-DFw7Dm04.js";import"./addEventListener-CyIGRBLo.js";import"./index-BjmMRE_R.js";import"./index-DhvFX8qt.js";import"./Dropdown-rGtWKJHe.js";import"./PurePanel-CqHXrOsk.js";import"./useBreakpoint-CY4yI6XJ.js";import"./responsiveObserver-CXhvU71l.js";import"./Pagination-C-O9TTNX.js";import"./SearchOutlined-CdQkKFhK.js";import"./file-download-C5xyVAi3.js";import"./index-gQU3uxHK.js";import"./EyeOutlined-CgV8UoEr.js";const ce=D.lazy(()=>M(()=>import("./VideoViewer-CtMK-Ysl.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),de=D.lazy(()=>M(()=>import("./PostMediaset-BlsZEMKP.js"),__vite__mapDeps([6,1,2,7,8,9,4,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,3,25,5,26]),import.meta.url));function Be(){const{ti:n}=q(),{message:k}=G();X();const[x,u]=I("MyPosts.postFilters",{uid:"",privacy:C.ALL,omitPinnedPost:!0,beforeTime:new Date("2019-02-01").getTime(),taggedInOnly:!1,postedByOthers:!1}),[y,O]=I("MyPosts.posts",[]),[f,b]=I("MyPosts.loading",!1),A=$.useMemo(()=>y.map((i,t)=>({...i,recent:t})),[y]),N=async()=>{b(!0);const i=await _(x);i.length?(O(i),console.log(i)):k.info(n({en:"No data found",vi:"Kh√¥ng c√≥ d·ªØ li·ªáu"})),b(!1)},B=async()=>{var t;b(!0);const i=await _({...x,cursor:(t=y[y.length-1])==null?void 0:t.cursor});i!=null&&i.length?(O(s=>[...s,...i]),k.success({content:n({en:"Load more success ",vi:"T·∫£i th√™m th√†nh c√¥ng "})+i.length})):k.info({content:n({en:"No more data",vi:"Kh√¥ng c√≥ d·ªØ li·ªáu"})}),b(!1)},U=(i,t)=>{u(s=>v(s,a=>{const o=Array.isArray(t)?t[0]:t;a.beforeTime=new Date(o).getTime(),console.log(t,a.beforeTime)}))},V=i=>{u(t=>v(t,s=>{s.postedByOthers=i}))},E=i=>{u(t=>v(t,s=>{s.privacy=i}))},S=()=>{u(i=>v(i,t=>{t.taggedInOnly=!t.taggedInOnly}))},W=async i=>{const t=i.target.value;u(a=>v(a,o=>{o.uid=t}));const s=await te(t);u(a=>v(a,o=>{o.uid=s}))},z=[{title:"#",key:"recent",dataIndex:"recent",sorter:(i,t)=>i.recent-t.recent,render:(i,t,s)=>t.recent+1,width:70,align:"center"},{title:n({en:"Actor",vi:"Ng∆∞·ªùi ƒëƒÉng"}),key:"actor",dataIndex:"actor",onSearch:(i,t,s)=>{var a,o;return P(i,(a=s==null?void 0:s.actor)==null?void 0:a.name)||P(i,(o=s==null?void 0:s.actor)==null?void 0:o.id)},render:(i,t,s)=>{var a,o,r,l,d,m;return e.jsxs(c,{style:{maxWidth:300},children:[e.jsx(se,{shape:"square",src:e.jsx(F,{src:J((a=t.actor)==null?void 0:a.id),fallback:(o=t.actor)==null?void 0:o.avatar}),size:50}),e.jsxs(c,{direction:"vertical",size:0,children:[e.jsx("a",{href:((r=t.actor)==null?void 0:r.url)||Y((l=t.actor)==null?void 0:l.id),target:"_blank",children:e.jsx("b",{children:(d=t.actor)==null?void 0:d.name})}),e.jsx("span",{style:{opacity:.5},children:(m=t.actor)==null?void 0:m.id})]})]})},width:250},{title:n({en:"Media",vi:"·∫¢nh/Video"}),key:"media",dataIndex:"media",render:(i,t,s)=>{var l;const a=(l=t.content)==null?void 0:l.attachments,o=a.length===1,r=a.length===1&&a[0].type==="Video";return(a==null?void 0:a.length)>0?e.jsx(Z.Ribbon,{text:a.length,style:{display:a.length>1?"block":"none"},children:e.jsx(F,{src:a[0].thumbnail,style:{objectFit:"cover",maxHeight:150,maxWidth:200,borderRadius:10},preview:o&&!r?!0:{destroyOnClose:!0,imageRender:r?()=>e.jsx(ce,{info:{id:a[0].id}}):()=>e.jsx("div",{style:{maxWidth:"90vw",maxHeight:"90vh",alignItems:"center",overflowY:"auto",overflowX:"hidden",backgroundColor:"#111",padding:20,borderRadius:10},children:e.jsx(de,{target:t.actor,postId:t.url})}),toolbarRender:()=>null}})}):"-"},filters:[{text:n({en:"1 Video",vi:"1 Video"}),value:"video"},{text:n({en:"Has media",vi:"C√≥ ·∫£nh/video"}),value:"has-media"},{text:n({en:"Multi media",vi:"Nhi·ªÅu ·∫£nh/video"}),value:"multi-media"}],onFilter:(i,t)=>{var s,a,o,r,l,d,m,T,L;if(i==="video")return((a=(s=t.content)==null?void 0:s.attachments)==null?void 0:a.length)===1&&((l=(r=(o=t.content)==null?void 0:o.attachments)==null?void 0:r[0])==null?void 0:l.type)==="Video";if(i==="has-media")return((m=(d=t.content)==null?void 0:d.attachments)==null?void 0:m.length)>0;if(i==="multi-media")return((L=(T=t.content)==null?void 0:T.attachments)==null?void 0:L.length)>1},width:200,align:"right"},{title:n({en:"Content",vi:"N·ªôi dung"}),key:"content",dataIndex:"content",onSearch:(i,t,s)=>{var a;return[(a=s.content)==null?void 0:a.text,s.message,s.title,s.summary].filter(Boolean).some(o=>P(i,o))},render:(i,t,s)=>{var r,l,d,m;const a=t.message||t.title||t.summary,o=((r=t.content)==null?void 0:r.text)||((m=(d=(l=t.content)==null?void 0:l.attachments)==null?void 0:d.find(T=>T.title))==null?void 0:m.title);return e.jsxs(c,{direction:"vertical",style:{maxWidth:400},children:[(a==null?void 0:a.length)&&e.jsx(p.Text,{children:R(a,150)}),e.jsx(p.Text,{type:"secondary",children:R(o,150)})]})},width:"auto"},{title:n({en:"Posted time",vi:"ƒêƒÉng l√∫c"}),key:"date",dataIndex:"date",sorter:(i,t)=>i.creation_time-t.creation_time,render:(i,t,s)=>e.jsxs(c,{direction:"vertical",size:0,children:[e.jsxs(p.Text,{children:[K(new Date(t.creation_time))," ",n({en:" ago",vi:"tr∆∞·ªõc"})]}),e.jsx(p.Text,{type:"secondary",children:Q(t.creation_time)})]})},{title:n({en:"Privacy",vi:"Quy·ªÅn ri√™ng t∆∞"}),key:"privacy",dataIndex:"privacy",render:(i,t,s)=>{const a=t.privacy.scope,o=t.privacy.description;return e.jsxs(c,{direction:"vertical",size:0,children:[e.jsx(p.Text,{children:n(w[a])}),o&&a===C.CUSTOM&&e.jsx(p.Text,{type:"secondary",children:o})]})},filters:Object.keys(C).map(i=>({text:n(w[i])+" ("+y.filter(t=>t.privacy.scope===i).length+")",value:i})),onFilter:(i,t)=>t.privacy.scope===i,width:150},{title:n({en:"Action",vi:"H√†nh ƒë·ªông"}),key:"action",dataIndex:"action",render:(i,t,s)=>e.jsxs(c.Compact,{children:[e.jsx(g,{title:n({en:"Delete",vi:"Xo√°"}),children:e.jsx(h,{disabled:!0,icon:e.jsx("i",{className:"fa-solid fa-trash"})})}),e.jsx(g,{title:n({en:"View on Facebook",vi:"Xem b√†i vi·∫øt"}),children:e.jsx(h,{onClick:()=>window.open(t.url,"_blank"),icon:e.jsx("i",{className:"fa-solid fa-up-right-from-square"})})})]}),width:150}],H=i=>e.jsxs(e.Fragment,{children:[e.jsxs(c.Compact,{children:[e.jsx(h,{loading:f,type:"primary",icon:e.jsx("i",{className:"fa-solid fa-rotate-right"}),onClick:N,children:n(f?{en:"Loading..",vi:"ƒêang t·∫£i.."}:{en:"Reload",vi:"T·∫£i l·∫°i"})}),e.jsx(h,{loading:f,icon:e.jsx("i",{className:"fa-solid fa-play"}),onClick:B,children:n(f?{en:"Loading..",vi:"ƒêang t·∫£i.."}:{en:"Load more",vi:"T·∫£i th√™m"})})]}),e.jsx(ae,{data:i.length?i:y,options:[{key:"json",label:".json",prepareData:t=>({fileName:"posts.json",data:JSON.stringify(t,null,4)})}]}),e.jsx(g,{title:n({en:"Coming soon",vi:"S·∫Øp c√≥"}),children:e.jsxs(c.Compact,{children:[e.jsxs(h,{disabled:!0,icon:e.jsx("i",{className:"fa-solid fa-trash"}),children:[n({en:"Delete",vi:"Xo√°"})," ",i.length]}),e.jsxs(h,{disabled:!0,icon:e.jsx("i",{className:"fa-solid fa-lock"}),children:[n({en:"Change privacy",vi:"S·ª≠a quy·ªÅn ri√™ng t∆∞"})," ",i.length]})]})})]});return e.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[e.jsxs(oe,{align:"middle",style:{margin:"16px"},children:[e.jsx(p.Title,{level:3,style:{margin:0},children:n({en:"Posts manager",vi:"Qu·∫£n l√Ω b√†i vi·∫øt"})}),e.jsx(ee,{color:"error",style:{marginLeft:10},children:n({en:"üöß Work in progress",vi:"üöß ƒêang ph√°t tri·ªÉn"})})]}),e.jsxs(c.Compact,{style:{marginBottom:10,marginLeft:5},children:[e.jsx(g,{title:n({en:"FB User",vi:"Ng∆∞·ªùi d√πng FB"}),children:e.jsx(re,{placeholder:n({en:"UID/URL",vi:"UID/URL"}),value:x.uid,onChange:W,style:{maxWidth:150}})}),e.jsx(g,{title:n({en:"Posted before time",vi:"ƒêƒÉng tr∆∞·ªõc ng√†y"}),children:e.jsx(le,{value:ie(x.beforeTime),onChange:U})}),e.jsx(g,{title:n({en:"Posted by",vi:"ƒêƒÉng b·ªüi"}),children:e.jsxs(j,{style:{minWidth:120},value:x.postedByOthers,onChange:V,children:[e.jsx(j.Option,{value:null,children:n({en:"All",vi:"T·∫•t c·∫£"})}),e.jsxs(j.Option,{value:!1,children:["üìå ",n({en:"Owner",vi:"Ch√≠nh ch·ªß"})]}),e.jsxs(j.Option,{value:!0,children:["üë§ ",n({en:"Others",vi:"Ng∆∞·ªùi kh√°c"})]})]})}),e.jsx(g,{title:n({en:"Privacy",vi:"Quy·ªÅn ri√™ng t∆∞"}),children:e.jsx(j,{style:{minWidth:120},value:x.privacy,onChange:E,children:Object.keys(C).map(i=>e.jsx(j.Option,{value:i,children:n(w[i])},i))})}),e.jsx(g,{title:n({en:"Tagged only",vi:"Ch·ªâ b√†i vi·∫øt ƒë∆∞·ª£c g·∫Øn th·∫ª"}),children:e.jsx(h,{icon:e.jsx("i",{className:"fa-solid fa-user-tag"}),type:x.taggedInOnly?"primary":"default",onClick:S,children:n({en:"Tagged only",vi:"G·∫Øn th·∫ª"})})}),e.jsx(h,{type:"primary",onClick:N,icon:e.jsx("i",{className:"fa-solid fa-filter"}),children:n({en:"Apply",vi:"L·ªçc"})})]}),e.jsx(ne,{data:A,columns:z,searchable:!0,selectable:!0,keyExtractor:i=>i.id,renderTitle:H})]})}export{Be as default};
