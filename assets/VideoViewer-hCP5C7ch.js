import{aG as b,r as a,ck as f,aI as s,cl as x,aK as g}from"./index-CoQJRaJc.js";import{A,V as F}from"./VideoWithMuted-DXlmFkOH.js";import{S as y,T as j,t as p}from"./MyApp-Bv9Tdnls.js";function M({info:i,style:S,videoStyle:z,buttonTop:u=!1}){var h;const{ti:V}=b(),[t,o]=a.useState(null),[l,C]=a.useState({}),[n,R]=a.useState(0),d=(t==null?void 0:t.source)||i.source,c=a.useRef(!1);a.useEffect(()=>{var e;(e=i.variants)!=null&&e.length&&!Object.keys(l).length&&!c.current&&(c.current=!0,Promise.all(i.variants.map(r=>f(r.source).then(k=>{C(E=>({...E,[r.id]:k}))}).catch(()=>{console.log("ERROR get size",r)}))).finally(()=>{c.current=!1}))},[l,i.variants]),a.useEffect(()=>{i.source&&f(i.source).then(e=>{R(e)})},[i.source]);const m=s.jsxs(y.Compact,{children:[s.jsx(j,{title:n?x(n,1):"",children:s.jsx(g,{type:t?"default":"primary",onClick:()=>o(null),children:V({en:"Default",vi:"Mặc định"})})}),(h=i.variants)==null?void 0:h.map((e,r)=>s.jsx(j,{title:(e.isAudio?"":e.width+"x"+e.height)+(l[e.id]?" - "+x(l[e.id],1):""),children:s.jsxs(g,{type:(t==null?void 0:t.id)===e.id?"primary":"default",onClick:()=>{p("VideoViewer:onChangeVariant:"+(e.qualityLabel||e.mimeType)),o(e)},icon:e.isAudio?s.jsx("i",{className:"fa-solid fa-music"}):null,children:[e.qualityClass," ",e.qualityLabel||e.mimeType]})},e.id))]});return s.jsxs(y,{direction:"vertical",style:{padding:15,borderRadius:10,backgroundColor:"#222",justifyContent:"center",alignItems:"center",...S},children:[u&&m,t!=null&&t.isAudio?s.jsx(A,{src:d}):s.jsx(F,{src:d,style:{maxWidth:"80vw",maxHeight:"80vh",...z}}),!u&&m]})}export{M as default};
