const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./UploadModal-C2FPy4IS.js","./index-DydTkMV2.js","./index-9SBFHPtm.css","./index-DxsSeA-N.js","./PurePanel-bZQXf2rU.js","./MyApp-BeWNgXar.js","./useBreakpoint-BQHjIOgG.js","./responsiveObserver-DJIVJZWQ.js","./EyeOutlined-1iI3OztS.js","./index-CIyDf2jJ.js"])))=>i.map(i=>d[i]);
import{aA as An,aB as zn,b1 as Xn,aH as Vn,aw as nn,ax as en,r as U,b7 as Jn,b8 as En,aJ as i,aL as j,aS as Zn,b9 as ne,b5 as Dn,at as ee,b6 as tn,aC as G,aG as Tn}from"./index-DydTkMV2.js";import{d as z}from"./dayjs.min-DjwpXSjs.js";import te from"./MyTable-C4ZvRZ43.js";import{E as ie}from"./ExportButton-CViKdVRw.js";import{j as P,p as A,g as $,d as Rn,b as se,c as sn,k as re,t as N,S as Q,a as X,T as I,B as In,e as V,l as oe,m as ae}from"./MyApp-BeWNgXar.js";import{u as ce}from"./useForceStop-25lATWyT.js";import{d as le}from"./messages-DjzJbjGq.js";import{A as de}from"./index-DIvNmdxF.js";import{I as ue}from"./index-D7DPDq-n.js";import{R as he}from"./row-8w7dkT51.js";import{T as ge}from"./index-CIyDf2jJ.js";import{P as rn}from"./index-BHMCsDY4.js";import{P as J}from"./index-5v9p6Q2h.js";import"./index-DhNGfTEU.js";import"./index-CQW_sFN6.js";import"./PurePanel-bZQXf2rU.js";import"./SearchOutlined-BzS9TeDb.js";import"./Table-BJnGvbKm.js";import"./addEventListener-C_bz9vvg.js";import"./index-PaDwoYYR.js";import"./index-DnAZdSG1.js";import"./Dropdown-BQv78xjs.js";import"./useBreakpoint-BQHjIOgG.js";import"./responsiveObserver-DJIVJZWQ.js";import"./Pagination-Tj3qyxsl.js";import"./index-Bb9pHj-Y.js";import"./EyeOutlined-1iI3OztS.js";import"./file-download-BRim8Hre.js";async function me({myUid:a,targetUid:m=""}){const b=await P({doc_id:"4936483286421335",variables:{id:m||a,query:"",scale:1}});try{const t=A(b||"{}"),{edges:v=[]}=An(t,!1);return v.map(g=>{var y,_,p,w,F,R;return{uid:(y=g.node)==null?void 0:y.id,url:((_=g.node)==null?void 0:_.url)||$((p=g.node)==null?void 0:p.id),name:(w=g.node)==null?void 0:w.name,avatar:(R=(F=g.node)==null?void 0:F.photo)==null?void 0:R.uri,avatarLarge:Rn(g.node.id)}})}catch{return[]}}async function fe({myUid:a,targetUid:m}){var v;const b=await P({doc_id:"8752443744796374",variables:{input:{source:"friending_jewel",unfriended_user_id:m,actor_id:a},scale:1}}),t=A(b||"{}");if((v=t.errors)!=null&&v.length)throw new Error(t.errors[0].message);return t}async function pe({myUid:a,targetUid:m}){var v;const b=await P({doc_id:"6294978773852692",variables:{input:{attribution_id_v2:"FriendingCometRoot.react,comet.friending,tap_tabbar,1667288605315,127814,2356318349,",friend_requestee_ids:[m],people_you_may_know_location:"friends_center",refs:[null],source:"people_you_may_know",warn_ack_for_ids:[],actor_id:a},scale:2}}),t=A(b);if((v=t.errors)!=null&&v.length)throw new Error(t.errors[0].message);return t}async function ke({myUid:a,targetUid:m}){var v,g,y,_,p,w,F;const b=await P({doc_id:"5028133957233114",variables:{input:{actor_id:a,user_id:m}}}),t=A(b||"{}");if((v=t.errors)!=null&&v.length)throw new Error(t.errors[0].message);if(((_=(y=(g=t==null?void 0:t.data)==null?void 0:g.user_poke)==null?void 0:y.user)==null?void 0:_.poke_status)!="PENDING")throw new Error("Failed to poke friend: "+((F=(w=(p=t==null?void 0:t.data)==null?void 0:p.user_poke)==null?void 0:w.user)==null?void 0:F.poke_status));return t}async function xe({myUid:a,cursor:m=null}){let b=await P({doc_id:"4186250744800382",variables:{count:8,cursor:m,scale:2,id:btoa(`app_collection:${a}:2356318349:2`)}});return A(b)}async function ve(a){var t,v,g;const m=await P({fb_api_req_friendly_name:"CometContactPresenceUtils_ContactProfilesQuery",variables:{ids:a,scale:2,navigation_fix_gk:!1},doc_id:"8907654129270550"}),b=A(m);return(g=(v=(t=b==null?void 0:b.data)==null?void 0:t.viewer)==null?void 0:v.chat_sidebar_contact_nodes)==null?void 0:g.map(y=>{var _;return{uid:y.id,name:y.name,avatar:(_=y.profile_picture)==null?void 0:_.uri}})}async function be(){var w,F,R,B,W,T,S,O;const a=await P({fb_api_req_friendly_name:"CometHomeContactsContainerQuery",variables:{numContactsToFetch:17,scale:2,__relay_internal__pv__CometHomeContactListItemsContactListAnRankingIsEnabledrelayprovider:!0},doc_id:"8845828445504279"}),[m,b]=((w=a==null?void 0:a.split)==null?void 0:w.call(a,`
`))||[],t=A(m),v=[];for(let E of zn(t,"chat_sidebar_contacts")||[])v.push({uid:E.id,name:E.name,avatar:(F=E.profile_picture)==null?void 0:F.uri});const g=A(b),_=(((O=(S=(T=(W=(B=(R=g==null?void 0:g.data)==null?void 0:R.mnet_ranks)==null?void 0:B.edges)==null?void 0:W[0])==null?void 0:T.node)==null?void 0:S.items)==null?void 0:O.edges)||[]).map(E=>{var D;return(D=E.node)==null?void 0:D.user_id}).filter(Boolean),p=await ve(_);if(p.length>0){const E=new Set(v.map(D=>D.uid));for(let D of p)E.has(D.uid)||(E.add(D.uid),v.push(D))}return v}const ye=U.lazy(()=>Zn(()=>import("./UploadModal-C2FPy4IS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),{Title:Fe}=ge,k={FRIEND:"Friend",POKED:"Poked",UNFRIENDED:"Unfriended",REQUESTED:"Requested friend",NEW:"New friend"},je={[k.POKED]:"green",[k.UNFRIENDED]:"red",[k.NEW]:"blue",[k.REQUESTED]:"pink"},Un=a=>{switch(a){case k.FRIEND:return{en:"Friend",vi:"B·∫°n b√®"};case k.POKED:return{en:"Poked",vi:"ƒê√£ ch·ªçc"};case k.UNFRIENDED:return{en:"Unfriended",vi:"ƒê√£ hu·ª∑ k·∫øt b·∫°n"};case k.REQUESTED:return{en:"Requested friend",vi:"ƒê√£ g·ª≠i k·∫øt b·∫°n"};case k.NEW:return{en:"New friend",vi:"Ch∆∞a k·∫øt b·∫°n"};default:return a}},we=a=>{const m=(a==null?void 0:a.statuses)||[];return!m.includes(k.REQUESTED)&&(m.includes(k.NEW)||m.includes(k.UNFRIENDED))},Ce=a=>{const m=(a==null?void 0:a.statuses)||[];return!m.includes(k.NEW)&&!m.includes(k.UNFRIENDED)},on={"Name contains special characters":{en:"üëΩ Special characters",vi:"üëΩ K√Ω t·ª± ƒë·∫∑c bi·ªát",color:"orange"},"Name contains numbers":{en:"üîü Contains numbers",vi:"üîü Ch·ª©a s·ªë",color:"purple"},"No avatar":{en:"üë§ No avatar",vi:"üë§ Kh√¥ng avatar",color:"cyan"},"Strange uid":{en:"üÜî Strange UID",vi:"üÜî UID l·∫°",color:"blue"},Locked:{en:"üîí Locked",vi:"üîí B·ªã kho√°",color:"red"},"Blocked messages":{en:"üö´ Blocked messages",vi:"üö´ Ch·∫∑n tin nh·∫Øn",color:"red"}},$n={MALE:{en:"üë¶üèª Male",vi:"üë¶üèª Nam"},FEMALE:{en:"üë©üèª Female",vi:"üë©üèª N·ªØ"},UNKNOWN:{en:"‚ùì Unknown",vi:"‚ùì Kh√¥ng r√µ"}};function nt(){const{message:a,notification:m}=se(),b=Xn(),{ti:t}=Vn(),v=ce(),g=nn(en.profile),y=nn(en.friendsByUid),_=nn(en.setFriendsByUid),[p,w]=sn("AllFriends.data",[]),[F,R]=sn("AllFriends.interactions",[]),[B,W]=sn("AllFriends.ranking",[]),T=U.useMemo(()=>{var s,o;const n=new Map,e=new Map;for(let c of F)(s=c.reactions_uid)==null||s.forEach(d=>n.set(d,(n.get(d)||0)+1)),(o=c.comments_uid)==null||o.forEach(d=>e.set(d,(e.get(d)||0)+1));return{reactions:n,comments:e}},[F]),S=U.useMemo(()=>(p==null?void 0:p.map((n,e)=>{var s,o,c;return{...n,recent:e,comments:((s=T==null?void 0:T.comments)==null?void 0:s.get(n.uid))||0,reactions:((o=T==null?void 0:T.reactions)==null?void 0:o.get(n.uid))||0,ranking:B==null?void 0:B.indexOf(n.uid),quickFilters:Array.from(new Set([...n.quickFilters||[],(c=n.uid)!=null&&c.startsWith("1000")?null:"Strange uid",re(n.avatar)?"No avatar":null,/\d/.test(n.name)?"Name contains numbers":null,Jn(n.name)?"Name contains special characters":null].filter(Boolean)))}}))||[],[p,T,B]),[O,E]=U.useState(!1),[D,an]=U.useState(0),[Bn,cn]=U.useState(!1),[ln,dn]=U.useState(!1),K=U.useRef(null);U.useEffect(()=>{g!=null&&g.uid&&!(p!=null&&p.length)&&un()},[]);const Y=(n,e,s=!1,o=!1)=>{w(c=>tn(c,h=>{Array.isArray(n)||(n=[n]);let f=[];for(let r of n){let l=h.findIndex(x=>x.uid==((r==null?void 0:r.uid)||r)),u=h[l];u?(u.statuses||(u.statuses=[]),!s&&!u.statuses.includes(e)?u.statuses.push(e):(Array.isArray(e)||(e=[e]),u.statuses=e),o&&f.push({index:l,data:u})):o?h.unshift({...r,statuses:[e]}):h.push({...r,statuses:[e]})}for(let{index:r,data:l}of f)h.splice(r,1),h.unshift(l);return h}))},Sn=(n=p)=>{let e=!1;const s=(y==null?void 0:y[g.uid])||[],o=n.map(l=>l.uid),c=s.map(l=>l.uid),d=new Set(o),h=new Set(c),f=o.filter(l=>!h.has(l)),r=c.filter(l=>!d.has(l));f.length&&(e=!0,console.log("New friends: ",f),Y(f,k.NEW,!0),s!=null&&s.length?m.open({type:"success",duration:0,message:t({en:`Find ${f.length} new friends`,vi:`T√¨m th·∫•y ${f.length} b·∫°n m·ªõi`}),description:i.jsx("div",{style:{maxHeight:300,overflowY:"auto",overflowX:"hidden"},children:i.jsx("ol",{children:f.map(l=>{const u=n.find(x=>x.uid==l);return i.jsx("li",{children:i.jsx("a",{href:$(l),target:"_blank",children:(u==null?void 0:u.name)||l})},l)})})})}):m.open({type:"success",duration:0,message:t({en:`Saved friends to cache: ${f.length}`,vi:`ƒê√£ l∆∞u danh s√°ch b·∫°n b√®: ${f.length}`}),description:t({en:"Will notify if you have new friends / someone unfriended to you in future",vi:"S·∫Ω th√¥ng b√°o n·∫øu c√≥ b·∫°n m·ªõi / ng∆∞·ªùi hu·ª∑ k·∫øt b·∫°n v·ªõi b·∫°n trong t∆∞∆°ng lai"})})),r.length&&(e=!0,console.log("Deleted friends: ",r),m.open({type:"info",duration:0,message:t({en:`Find ${r.length} unfriended`,vi:`C√≥ ${r.length} ng∆∞·ªùi hu·ª∑ k·∫øt b·∫°n`}),description:i.jsx("div",{style:{maxHeight:300,overflowY:"auto",overflowX:"hidden"},children:i.jsx("ol",{children:r.map(l=>{const u=s.find(x=>x.uid==l);return i.jsx("li",{children:i.jsx("a",{href:$(l),target:"_blank",children:(u==null?void 0:u.name)||l})},l)})})})})),e&&_(g==null?void 0:g.uid,n.map(l=>({uid:l.uid,name:l.name})))},un=()=>{if(O)return;N("AllFriends:onClickReload");const n="onClickReload";a.loading({key:n,content:t({en:"Fetching friends...",vi:"ƒêang t·∫£i b·∫°n b√®..."}),duration:0}),E(!0),me({myUid:g==null?void 0:g.uid}).then(e=>{var s;if(Sn(e),!(e!=null&&e.length))return a.error({key:n,content:t({en:"No data to show",vi:"Kh√¥ng c√≥ d·ªØ li·ªáu"})});w(e),console.log(e),a.success({key:n,content:t({en:"Fetch friends completed",vi:"T·∫£i xong b·∫°n b√®"})}),(s=K.current)==null||s.clearFilter()}).catch(e=>{a.error({key:n,content:t({en:"Failed to fetch friends",vi:"L·ªói t·∫£i b·∫°n b√®"})+": "+e.message}),console.log(e)}).finally(()=>{E(!1)})},hn=async n=>{N("AllFriends:onClickUnfriendOne");const e="onClickUnfriendOne"+n.uid;try{return a.loading({key:e,content:t({en:"Unfriending...",vi:"ƒêang hu·ª∑ k·∫øt b·∫°n..."})+" "+n.name,duration:0}),await fe({myUid:g==null?void 0:g.uid,targetUid:n.uid}),a.success({key:e,content:t({en:"Unfriend completed",vi:"ƒê√£ hu·ª∑ k·∫øt b·∫°n"})+": "+n.name}),Y(n,k.UNFRIENDED),!0}catch(s){return a.error({key:e,content:t({en:"Failed to unfriend",vi:"L·ªói hu·ª∑ k·∫øt b·∫°n"})+": "+n.name+": "+s.message}),console.log(s),!1}},qn=async n=>{if(!await V())return;N("AllFriends:onClickUnfriendSelected");const e=new Set;for(let o of n)await hn(o)&&e.add(o.uid),await G(500);const s=e.size+"/"+n.length;m.open({type:"success",message:t({en:"Success",vi:"Th√†nh c√¥ng"}),description:t({en:`Unfriended completed ${s} friends`,vi:`ƒê√£ hu·ª∑ k·∫øt b·∫°n v·ªõi ${s} ng∆∞·ªùi`}),duration:0})},gn=async n=>{N("AllFriends:onClickPokeFriend");const e="onClickPokeFriend"+n.uid;try{return a.loading({key:e,content:t({en:"Poking...",vi:"ƒêang ch·ªçc..."})+" "+n.name,duration:0}),await ke({myUid:g==null?void 0:g.uid,targetUid:n.uid}),a.success({key:e,content:t({en:"Poke completed",vi:"Ch·ªçc th√†nh c√¥ng"})+": "+n.name}),Y(n,k.POKED),!0}catch(s){return a.error({key:e,content:t({en:"Failed to poke",vi:"Ch·ªçc th·∫•t b·∫°i"})+": "+n.name+": "+s.message}),console.log(s),!1}},Ln=async n=>{N("AllFriends:onClickPokeSelected");const e=new Set;for(let o of n)await gn(o)&&e.add(o.uid),await G(500);const s=e.size+"/"+n.length;m.open({type:"success",message:t({en:"Success",vi:"Th√†nh c√¥ng"}),description:t({en:`Poke completed ${s} friends`,vi:`ƒê√£ ch·ªçc ${s} b·∫°n`}),duration:0})},mn=async n=>{N("AllFriends:onClickAddFriend");const e="onClickAddFriend"+n.uid;try{return a.loading({key:e,content:t({en:"Sending friend request...",vi:"ƒêang g·ª≠i k·∫øt b·∫°n..."})+" "+n.name,duration:0}),await pe({myUid:g==null?void 0:g.uid,targetUid:n.uid}),a.success({key:e,content:t({en:"Send friend request success",vi:"G·ª≠i k·∫øt b·∫°n th√†nh c√¥ng"})+": "+n.name}),Y(n,k.REQUESTED),!0}catch(s){return a.error({key:e,content:t({en:"Failed to send friend request",vi:"L·ªói g·ª≠i k·∫øt b·∫°n"})+": "+s.message}),!1}},Mn=async n=>{if(!await V())return;N("AllFriends:onClickAddFriendSelected");const e=new Set;for(let o of n)await mn(o)&&e.add(o.uid),await G(500);const s=e.size+"/"+n.length;m.open({type:"success",message:t({en:"Success",vi:"Th√†nh c√¥ng"}),description:t({en:`Sent friend request success ${s} users`,vi:`G·ª≠i k·∫øt b·∫°n th√†nh c√¥ng v·ªõi ${s} ng∆∞·ªùi`}),duration:0})},Yn=async()=>{var h,f;if(D)return;const n="AllFriends:onClickFindBlockedMessages";N(n);const e=(h=K.current)==null?void 0:h.getDataSelected(),s=e!=null&&e.length?e:p,o=[];let c=!1;for(let r=0;r<s.length&&!c;r++){an(!0),a.loading({key:n,duration:0,content:i.jsxs(i.Fragment,{children:[t({en:"Finding blocked messages...",vi:"ƒêang t√¨m b·∫°n b√® ch·∫∑n tin nh·∫Øn..."})+`${o.length}/${r+1} - ${~~(r/s.length*100)}%`,i.jsx("br",{}),i.jsx("i",{children:t({en:"Click to stop",vi:"B·∫•m ƒë·ªÉ d·ª´ng"})})]}),onClick:()=>c=!0});const l=s[r];await le(l.uid)||(o.push(l),(f=K.current)==null||f.setDataSelected(o.map(u=>p.find(x=>x.uid===u.uid)||u)),w(u=>tn(u,x=>{var q;const C=x.find(L=>L.uid===l.uid);C&&!((q=C.quickFilters)!=null&&q.includes("Blocked messages"))&&(C.quickFilters||(C.quickFilters=[]),C.quickFilters.push("Blocked messages"))})),a.success({key:n,content:t({en:"Found",vi:"T√¨m th·∫•y"})+" "+l.name+" ("+o.length+")"}))}an(!1);const d=o.length?i.jsxs(i.Fragment,{children:[t({en:`Found ${o.length} friends blocking your messages`,vi:`T√¨m th·∫•y ${o.length} b·∫°n b√® ch·∫∑n tin nh·∫Øn`}),i.jsx("br",{}),i.jsx("ul",{children:o.map(r=>i.jsx("li",{children:r.name},r.uid))})]}):t({en:"No one block messages you",vi:"Kh√¥ng ai ch·∫∑n tin nh·∫Øn c·ªßa b·∫°n"});a.success({key:n,content:d}),m.open({type:"success",message:t({en:"Success",vi:"Th√†nh c√¥ng"}),description:d,duration:0})},Pn=async n=>{var e;if(!n)return a.error(t({en:"File empty",vi:"File r·ªóng"}));N("AllFriends:onUploadFriendsFile");try{const s=A(n,[]);if(!Array.isArray(s)||!(s!=null&&s.length))return a.error(t({en:"No data",vi:"Kh√¥ng c√≥ d·ªØ li·ªáu"}));const o=s.map(r=>r.uid).filter(Boolean);debugger;if(!o.length)return a.error(t({en:"No friends data in file",vi:"Kh√¥ng c√≥ d·ªØ li·ªáu b·∫°n b√® trong file"}));const c=new Set(o),d=[];for(let r of p)c.has(r.uid)||d.push(r);const h=new Set(p.map(r=>r.uid)),f=[];for(let r of s)h.has(r.uid)||f.push(r);Y(d,k.NEW,!1,!0),Y(f,k.UNFRIENDED,!1,!0),[{title:t({en:`Found ${d.length} new friends`,vi:`T√¨m th·∫•y ${d.length} b·∫°n m·ªõi`}),text:i.jsx("div",{style:{maxHeight:300,overflowY:"auto",overflowX:"hidden"},children:i.jsx("ol",{children:d.map(r=>i.jsx("li",{children:i.jsx("a",{href:$(r.uid),target:"_blank",children:r.name})},r.uid))})})},{title:t({en:`Found ${f.length} unfriended`,vi:`T√¨m th·∫•y ${f.length} ng∆∞·ªùi hu·ª∑ k·∫øt b·∫°n`}),text:i.jsx("div",{style:{maxHeight:300,overflowY:"auto",overflowX:"hidden"},children:i.jsx("ol",{children:f.map(r=>i.jsx("li",{children:i.jsx("a",{href:$(r.uid),target:"_blank",children:r.name})},r.uid))})})}].forEach(({title:r,text:l})=>m.open({type:"success",message:r,description:l,duration:0})),(f.length||d.length)&&((e=K.current)==null||e.setDataSelected([...f,...d]))}catch(s){a.error(s.message)}},Hn=n=>{b("/bulk-downloader",{state:{targetId:n,platform:ne.Facebook}})},On=async()=>{if(!await V()||ln)return;dn(!0);const n=v.start(),e="AllFriends:onClickScanInteractions";N(e),a.loading({key:e,duration:0,content:t({en:"Loading posts...",vi:"ƒêang t·∫£i b√†i vi·∫øt..."})});let s=!1;const o=await oe(1/0,r=>{var q;R([...r]);const l=r.reduce((L,H)=>{var M;return L+(((M=H.comments_uid)==null?void 0:M.length)||0)},0),u=r.reduce((L,H)=>{var M;return L+(((M=H.reactions_uid)==null?void 0:M.length)||0)},0),x=new Date(((q=r[r.length-1])==null?void 0:q.created_time)||0),C=Tn(x);a.loading({key:e,duration:0,content:i.jsxs(i.Fragment,{children:[t({en:`Loading ${C}: ${r.length} posts, ${u} reactions, ${l} comments...`,vi:`ƒêang t·∫£i ${C}: ${r.length} b√†i vi·∫øt, ${u} l∆∞·ª£t th√≠ch, ${l} b√¨nh lu·∫≠n...`}),i.jsx("br",{}),i.jsx("i",{children:t({en:"Click to stop",vi:"B·∫•m ƒë·ªÉ d·ª´ng"})})]}),onClick:()=>s=!0})},()=>s||n.value()),c=o.reduce((r,l)=>{var u;return r+(((u=l.comments_uid)==null?void 0:u.length)||0)},0),d=o.reduce((r,l)=>{var u;return r+(((u=l.reactions_uid)==null?void 0:u.length)||0)},0);a.destroy(e);const h=o[o.length-1],f=Tn(new Date((h==null?void 0:h.created_time)||0));m.open({type:"success",duration:0,message:t({en:"Scan interactions finished",vi:"Qu√©t t∆∞∆°ng t√°c xong"}),description:i.jsxs(i.Fragment,{children:[t({en:`Scanned ${o.length} posts, ${d} reactions, ${c} comments, last post ${f} `,vi:`Qu√©t ƒë∆∞·ª£c ${o.length} b√†i vi·∫øt, ${d} l∆∞·ª£t th√≠ch, ${c} b√¨nh lu·∫≠n, b√†i vi·∫øt cu·ªëi ${f} `}),i.jsx("a",{href:$(h==null?void 0:h.postId),target:"_blank",children:$(h==null?void 0:h.postId)})]})}),R(o),dn(!1)},Kn=async()=>{const n="AllFriends:onClickFindBuddy";N(n),a.loading({key:n,duration:0,content:t({en:"Scanning ranking friends...",vi:"ƒêang t·∫£i x·∫øp h·∫°ng b·∫°n b√®..."})});const e=await be();console.log(e),a.destroy(n),m.open({type:"success",duration:0,message:t({en:`Scan ranking completed: ${e.length} friends`,vi:`Qu√©t x·∫øp h·∫°ng b·∫°n b√® xong: ${e.length} b·∫°n`}),description:i.jsxs(i.Fragment,{children:["Top 20:",i.jsx("br",{}),i.jsx("ol",{children:e.slice(0,20).map((c,d)=>i.jsxs(i.Fragment,{children:[i.jsx("a",{href:$(c.uid),target:"_blank",children:d+1+": "+c.name},c.uid),i.jsx("br",{})]}))})]})}),W(e.map(c=>c.uid));const s=new Set(p.map(c=>c.uid)),o=e.filter(c=>!s.has(c.uid));o.length&&Y(o,k.NEW,!0)},Qn=async()=>{if(!await V())return;cn(!0);const n="AllFriends:onClickDeepScan";N(n),a.loading({key:n,content:t({en:"Deep Scanning...",vi:"ƒêang qu√©t chuy√™n s√¢u..."}),duration:0});const e=await ae(),s=[];let o=null;for(;;){const c=await xe({myUid:e,cursor:o}),{edges:d=[],page_info:h={}}=An(c)||{};if(!d.length)break;const f=d.map(r=>{var u,x,C,q,L,H,M,fn,pn,kn,xn,vn,bn,yn,Fn,jn,wn,Cn,_n,Nn;let l=(x=(u=r==null?void 0:r.node)==null?void 0:u.node)==null?void 0:x.id;if(!/^\d+$/.exec(l))try{let Z=atob(l);l=((C=/\d+/.exec(Z))==null?void 0:C[0])||l}catch(Z){console.log(Z)}return{uid:l,name:(L=(q=r==null?void 0:r.node)==null?void 0:q.title)==null?void 0:L.text,avatar:(M=(H=r==null?void 0:r.node)==null?void 0:H.image)==null?void 0:M.uri,avatarLarge:Rn(l),url:(fn=r==null?void 0:r.node)==null?void 0:fn.url,mutualFriendCount:((vn=(xn=(kn=(pn=r==null?void 0:r.node)==null?void 0:pn.subtitle_text)==null?void 0:kn.aggregated_ranges)==null?void 0:xn[0])==null?void 0:vn.count)||0,gender:((Cn=(wn=(jn=(Fn=(yn=(bn=r==null?void 0:r.node)==null?void 0:bn.actions_renderer)==null?void 0:yn.action)==null?void 0:Fn.client_handler)==null?void 0:jn.profile_action)==null?void 0:wn.restrictable_profile_owner)==null?void 0:Cn.gender)||"UNKNOWN",isLocked:!((_n=r==null?void 0:r.node)!=null&&_n.subtitle_text)||!((Nn=r==null?void 0:r.node)!=null&&Nn.url),cursor:(r==null?void 0:r.cursor)||(h==null?void 0:h.end_cursor)}});w(r=>tn(r,l=>(f.forEach(u=>{if(!u.uid)return;const x=l.find(C=>C.uid===u.uid);x?(x.mutualFriendCount=u.mutualFriendCount,x.gender=u.gender,x.quickFilters||(x.quickFilters=[]),u.isLocked&&!x.quickFilters.includes("Locked")&&x.quickFilters.push("Locked")):u.isLocked&&l.push({...u,quickFilters:["Locked"]})}),l))),s.push(...f),o=f[f.length-1].cursor,a.loading({key:n,content:t({en:"Deep Scanning...",vi:"ƒêang qu√©t chuy√™n s√¢u..."})+`${~~(s.length/p.length*100)}% (${s.length}/${p.length})`,duration:0}),await G(200)}a.destroy(n),m.open({type:"success",message:t({en:"Deep Scanning completed",vi:"Ho√†n t·∫•t Qu√©t chuy√™n s√¢u"})+` (${s.length}/${p.length})`,description:t({en:'Please see in "Quick filters" column',vi:'Vui l√≤ng xem c·ªôt "B·ªô l·ªçc"'})}),cn(!1)},Wn=[{title:"#",key:"recent",dataIndex:"recent",sorter:(n,e)=>n.recent-e.recent,render:(n,e,s)=>e.recent+1,width:70,align:"center"},{title:t({en:"Name",vi:"T√™n"}),dataIndex:"name",key:"name",sorter:(n,e)=>n.name.localeCompare(e.name),onSearch:(n,e,s)=>En(n,e)||En(n,s==null?void 0:s.uid),render:(n,e,s)=>i.jsxs(Q,{style:{maxWidth:300},children:[i.jsx(de,{shape:"square",src:i.jsx(ue,{src:e.avatarLarge,fallback:e.avatar}),size:50}),i.jsxs(Q,{direction:"vertical",size:0,children:[i.jsx("a",{href:e.url||$(e.uid),target:"_blank",children:i.jsx("b",{children:e.name})}),i.jsx("span",{style:{opacity:.5},children:e.uid})]})]}),width:"auto"},{title:t({en:"Quick Filters",vi:"B·ªô l·ªçc"}),dataIndex:"quickFilters",key:"quickFilters",render:(n,e,s)=>{var o;return((o=e.quickFilters)==null?void 0:o.map(c=>i.jsx(X,{color:on[c].color,children:t(on[c])},c)))||""},filters:Object.entries(on).map(([n,e])=>({text:t(e)+" ("+S.filter(s=>{var o;return(o=s.quickFilters)==null?void 0:o.includes(n)}).length+")",value:n})),onFilter:(n,e)=>{var s;return(s=e.quickFilters)==null?void 0:s.includes(n)},width:150},...p.find(n=>n.gender)?[{title:t({en:"Gender",vi:"Gi·ªõi t√≠nh"}),key:"gender",dataIndex:"gender",render:(n,e,s)=>{const o=t($n[e.gender])||"-";return e.gender==="FEMALE"?i.jsx(X,{color:"pink",children:o}):o},filters:Object.entries($n).map(([n,e])=>({text:t(e)+" ("+p.filter(s=>s.gender===n).length+")",value:n})),onFilter:(n,e)=>e.gender==n,width:120}]:[],...p.find(n=>n.mutualFriendCount)?[{title:t({en:"Mutual",vi:"B·∫°n chung"}),key:"mutualFriendCount",dataIndex:"mutualFriendCount",sorter:(n,e)=>n.mutualFriendCount-e.mutualFriendCount,width:120,align:"right",rangeFilter:{getValue:n=>n.mutualFriendCount}}]:[],...B.length?[{title:t({en:"Ranking",vi:"X·∫øp h·∫°ng"}),key:"ranking",dataIndex:"ranking",render:(n,e,s)=>n==-1?"_":n+1,sorter:(n,e)=>(n.ranking==-1?1/0:n.ranking)-(e.ranking==-1?1/0:e.ranking),width:120,align:"right",rangeFilter:{getValue:n=>n.ranking}}]:[],...F!=null&&F.length?[{title:t({en:"Reactions",vi:"Th√≠ch"}),key:"reactions",dataIndex:"reactions",sorter:(n,e)=>n.reactions-e.reactions,width:100,align:"right"},{title:t({en:"Comments",vi:"B√¨nh lu·∫≠n"}),key:"comments",dataIndex:"comments",sorter:(n,e)=>n.comments-e.comments,width:100,align:"right"}]:[],{title:t({en:"Friend status",vi:"Tr·∫°ng th√°i"}),dataIndex:"status",key:"status",width:150,filters:Object.entries(k).map(([n,e])=>({text:t(Un(e))+" ("+p.filter(s=>{var o,c;return((o=s.statuses)==null?void 0:o.includes(e))||e===k.FRIEND&&!((c=s.statuses)!=null&&c.length)}).length+")",value:e})),onFilter:(n,e)=>{var s,o;return((s=e.statuses)==null?void 0:s.includes(n))||n==k.FRIEND&&!((o=e.statuses)!=null&&o.length)},render:(n,e,s)=>{var o;return(o=e==null?void 0:e.statuses)!=null&&o.length?e.statuses.map(c=>({key:c,value:t(Un(c))})).map(({key:c,value:d})=>i.jsx(X,{color:je[c],children:d},c)):t({en:"Friend",vi:"B·∫°n b√®"})},align:"right"},{title:t({en:"Action",vi:"H√†nh ƒë·ªông"}),dataIndex:"action",key:"download",render:(n,e,s)=>{var o,c;return i.jsxs(Q.Compact,{children:[i.jsx(I,{title:t({en:"Bulk Downloader",vi:"T·∫£i h√†ng lo·∫°t"}),children:i.jsx(j,{type:"default",onClick:()=>Hn(e.uid),icon:i.jsx("i",{className:"fa-solid fa-download"})})}),i.jsx(I,{title:t({en:"Poke",vi:"Ch·ªçc"}),children:i.jsx(j,{type:"default",onClick:()=>gn(e),icon:i.jsx("i",{className:"fa-regular fa-hand-point-right"})})}),(o=e.statuses)!=null&&o.includes(k.UNFRIENDED)||(c=e.statuses)!=null&&c.includes(k.NEW)?i.jsx(I,{title:t({en:"Request friend",vi:"G·ª≠i k·∫øt b·∫°n"}),children:i.jsx(j,{type:"default",onClick:()=>mn(e),icon:i.jsx("i",{className:"fa-solid fa-user-plus"})})}):i.jsx(I,{title:t({en:"Unfriend",vi:"Hu·ª∑ k·∫øt b·∫°n"}),children:i.jsx(j,{danger:!0,onClick:()=>hn(e),icon:i.jsx("i",{className:"fa-solid fa-trash-can"})})})]})},width:150,align:"right"}],Gn=n=>{var o,c;const e=(o=n==null?void 0:n.filter)==null?void 0:o.call(n,we),s=(c=n==null?void 0:n.filter)==null?void 0:c.call(n,Ce);return i.jsxs(i.Fragment,{children:[i.jsx(j,{type:"primary",icon:O?i.jsx("i",{className:"fa-solid fa-rotate-right fa-spin"}):i.jsx("i",{className:"fa-solid fa-rotate-right"}),onClick:un,children:t({en:"Reload",vi:"T·∫£i l·∫°i"})}),i.jsx(ie,{data:n.length?n:p,options:[{key:"uid",label:".txt (friend uid)",prepareData:d=>({fileName:"friends_"+z().format("YYYY-MM-DD-HHmmss")+".txt",data:d.map(h=>h.uid).join(`
`)})},{key:"uid_name",label:".csv (friend uid+name)",prepareData:d=>({fileName:"friends_uid_name_"+z().format("YYYY-MM-DD-HHmmss")+".csv",data:Dn(d.map(h=>({uid:h.uid,name:h.name})))})},{key:"json",label:".json",prepareData:d=>({fileName:"friends"+z().format("YYYY-MM-DD-HHmmss")+".json",data:JSON.stringify(d,null,4)})},{key:"csv",label:".csv",prepareData:d=>({fileName:"friends"+z().format("YYYY-MM-DD-HHmmss")+".csv",data:Dn(d)})}]}),i.jsxs(Q.Compact,{children:[i.jsx(rn,{title:t({en:"Check who is blocking your messages",vi:"Xem ai ƒëang ch·∫∑n tin nh·∫Øn c·ªßa b·∫°n"}),content:i.jsx("ul",{children:t({en:`‚úÖ You still can message them
                                        ‚úÖ They can still read your messages
                                        ‚ùå But facebook will never mark as read`,vi:`‚úÖ B·∫°n v·∫´n nh·∫Øn ƒë∆∞·ª£c cho h·ªç
                                        ‚úÖ H·ªç v·∫´n ƒë·ªçc ƒë∆∞·ª£c tin nh·∫Øn
                                        ‚ùå Nh∆∞ng facebook s·∫Ω kh√¥ng c·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë√£ xem`}).split(`
`).map((d,h)=>i.jsx("li",{children:d.trim()},h))}),children:i.jsx(J,{title:t(t({en:"Check who is blocking your messages",vi:"Xem ai ƒëang ch·∫∑n tin nh·∫Øn c·ªßa b·∫°n"})),description:i.jsxs("ul",{children:[i.jsx("li",{children:t({en:`Are you sure to check ${(n==null?void 0:n.length)||S.length} friends?.
 `,vi:`B·∫°n c√≥ ch·∫Øc mu·ªën ki·ªÉm tra ${(n==null?void 0:n.length)||S.length} b·∫°n b√®?.`})}),i.jsx("li",{children:t({en:"You can select friends to check, instead of check all, to reduce load time.",vi:"B·∫°n c√≥ th·ªÉ ch·ªçn b·∫°n b√® ƒë·ªÉ ki·ªÉm tra, thay v√¨ ki·ªÉm tra t·∫•t c·∫£, ƒë·ªÉ gi·∫£m th·ªùi gian x·ª≠ l√Ω."})})]}),onConfirm:Yn,okText:t({en:"Yes",vi:"Ki·ªÉm tra"}),cancelText:t({en:"No",vi:"Hu·ª∑"}),children:i.jsx(j,{loading:!!D,icon:i.jsx("i",{className:"fa-solid fa-comment-slash"})})})}),i.jsx(ye,{accept:".json",title:t({en:"Upload friends file",vi:"T·∫£i l√™n file b·∫°n b√® ƒë√£ l∆∞u"}),text:t({en:"Click or drag file to this area to upload",vi:"Click ch·ªçn ho·∫∑c k√©o th·∫£ file v√†o ƒë√¢y"}),hint:t({en:"Support only .json backup file",vi:"Ch·ªâ h·ªó tr·ª£ file .json ƒë∆∞·ª£c xu·∫•t t·ª´ trang n√†y"}),onSubmit:Pn,renderButton:({showModal:d})=>i.jsx(rn,{title:t({en:"Check who unfriend you",vi:"Ki·ªÉm tra ai hu·ª∑ k·∫øt b·∫°n v·ªõi b·∫°n"}),content:i.jsx("ul",{children:t({en:`‚ùì How it work: Export friends data to file, then compare it later
                                            ‚úÖ FB AIO can automatically detect who unfriend you
                                            üö® Only use this feature if you want manual check`,vi:`‚ùì C√°ch ho·∫°t ƒë·ªông: L∆∞u danh s√°ch b·∫°n b√® ra file tr∆∞·ªõc, sau ƒë√≥ so s√°nh
                                            ‚úÖ FB AIO s·∫Ω t·ª± ƒë·ªông th√¥ng b√°o khi c√≥ ng∆∞·ªùi hu·ª∑ k·∫øt b·∫°n
                                            üö® Ch·ªâ s·ª≠ d·ª•ng ch·ª©c nƒÉng n√†y n·∫øu b·∫°n mu·ªën ch·ªß ƒë·ªông ki·ªÉm tra b·∫±ng tay`}).split(`
`).map((h,f)=>i.jsx("li",{children:h.trim()},f))}),children:i.jsx(j,{onClick:d,icon:i.jsx("i",{className:"fa-solid fa-user-slash"})})})}),i.jsx(rn,{title:t({en:"TopID - Auto make friends using AI",vi:"TopID - T·ª± ƒë·ªông k·∫øt b·∫°n b·∫±ng AI"}),content:i.jsx("ul",{children:t({vi:`üë´ K·∫øt b·∫°n theo ti√™u ch√≠: b·∫°n chung, gi·ªõi t√≠nh
                                        üö´ B·ªè qua n·∫øu kh√¥ng th·ªèa ti√™u ch√≠
                                        üëÄ K·∫øt b·∫°n v·ªõi danh s√°ch b·∫°n c·ªßa ng∆∞·ªùi kh√°c
                                        ü´∂ K·∫øt b·∫°n v·ªõi danh s√°ch g·ª£i √Ω b·∫°n b√® c·ªßa Facebook
                                        üéØ T·∫≠n d·ª•ng b·ªô l·ªçc c√≥ s·∫µn: c√πng t·ªânh, c√πng qu√™, m·ªõi th√™m g·∫ßn ƒë√¢y, ...
                                        ‚è≥ Th√™m th·ªùi gian ch·ªù: t·ª± ƒë·ªông b·∫•m th·ªß c√¥ng tr√™n giao di·ªán ƒë·ªÉ tr√°nh b·ªã ban`,en:`üë´ Add friends based on criteria: mutual friends, gender
                                        üö´ Skip if criteria not met
                                        üëÄ Add friends of others
                                        ü´∂ Add friends from Facebook's suggested list
                                        üéØ Filter options: same province, hometown, recently added, etc.
                                        ‚è≥ Include wait time: manually click to avoid getting banned`}).split(`
`).map((d,h)=>i.jsx("li",{children:d.trim()},h))}),children:i.jsx(In,{count:t({en:"New",vi:"M·ªõi"}),color:"purple",style:{color:"white",zIndex:3},children:i.jsx(j,{target:"_blank",href:ee.TopID.webstore,icon:i.jsx("i",{className:"fa-solid fa-robot"}),children:"TopID"})})}),i.jsx(I,{title:t({en:"Rank who has interacted with you the most recently. (Recent interactions)",vi:"X·∫øp h·∫°ng xem ai t∆∞∆°ng t√°c v·ªõi b·∫°n nhi·ªÅu nh·∫•t th·ªùi gian g·∫ßn ƒë√¢y (T∆∞∆°ng t√°c g·∫ßn ƒë√¢y)"}),children:i.jsx(j,{onClick:Kn,icon:i.jsx("i",{className:"fa-solid fa-ranking-star"}),children:t({en:"Ranking",vi:"X·∫øp h·∫°ng"})})}),i.jsx(I,{title:t({en:"Count friend's reactions and comments on all of your profile's posts (Total interactions)",vi:"ƒê·∫øm like v√† comment c·ªßa b·∫°n b√® tr√™n t·∫•t c·∫£ b√†i vi·∫øt c·ªßa b·∫°n (T·ªïng t∆∞∆°ng t√°c)"}),children:i.jsx(j,{loading:ln,icon:i.jsx("i",{className:"fa-solid fa-thumbs-up"}),onClick:On,children:t({en:"Interactions",vi:"T∆∞∆°ng t√°c"})})}),i.jsx(I,{title:t({en:"Deep scan all friends to filter: locked friends, gender, mutual friends ...",vi:"Qu√©t t·∫•t c·∫£ b·∫°n b√® ƒë·ªÉ l·ªçc: b·∫°n b√® b·ªã kho√°, gi·ªõi t√≠nh, b·∫°n chung ..."}),children:i.jsx(In,{count:"Hot",color:"red",style:{color:"white",zIndex:3},children:i.jsx(j,{loading:!!Bn,onClick:Qn,icon:i.jsx("i",{className:"fa-solid fa-magnifying-glass"}),children:t({en:"Deep scan",vi:"Qu√©t chuy√™n s√¢u"})})})})]}),i.jsx(Q.Compact,{children:n!=null&&n.length?i.jsxs(i.Fragment,{children:[i.jsx(I,{title:t({en:`Poke ${n.length} selected friends`,vi:`Ch·ªçc ${n.length} ng∆∞·ªùi ƒë∆∞·ª£c ch·ªçn`}),children:i.jsx(J,{title:t({en:`Poke ${n.length} selected friends`,vi:`Ch·ªçc ${n.length} ng∆∞·ªùi ƒë∆∞·ª£c ch·ªçn`}),description:t({en:"Are you sure to poke these friends?",vi:"B·∫°n c√≥ ch·∫Øc mu·ªën ch·ªçc nh·ªØng ng∆∞·ªùi n√†y?"}),onConfirm:()=>Ln(n),okText:t({en:"Yes",vi:"Ch·ªçc m·∫°nh v√†o"}),cancelText:t({en:"No",vi:"Tha"}),children:i.jsx(j,{type:"default",icon:i.jsx("i",{className:"fa-solid fa-hand-point-right"}),children:n.length?" "+n.length:""})})}),(e==null?void 0:e.length)>0?i.jsx(I,{title:t({en:`Request friend with ${e.length} selected users`,vi:`G·ª≠i k·∫øt b·∫°n v·ªõi ${e.length} ng∆∞·ªùi ƒë∆∞·ª£c ch·ªçn`}),children:i.jsx(J,{title:t({en:`Request friend with ${e.length} selected users`,vi:`G·ª≠i k·∫øt b·∫°n v·ªõi ${e.length} ng∆∞·ªùi ƒë∆∞·ª£c ch·ªçn`}),description:t({en:"Are you sure to send friend request to these users?",vi:"B·∫°n c√≥ ch·∫Øc mu·ªën g·ª≠i l·ªùi m·ªùi k·∫øt b·∫°n cho nh·ªØng ng∆∞·ªùi n√†y?"}),onConfirm:()=>Mn(e),okText:t({en:"Yes",vi:"G·ª≠i"}),cancelText:t({en:"No",vi:"Hu·ª∑"}),children:i.jsx(j,{icon:i.jsx("i",{className:"fa-solid fa-user-plus"}),children:e.length})})}):null,(s==null?void 0:s.length)>0?i.jsx(I,{title:t({en:`Unfriend ${s.length} selected friends`,vi:`Hu·ª∑ k·∫øt b·∫°n ${s.length} ng∆∞·ªùi ƒë∆∞·ª£c ch·ªçn`}),children:i.jsx(J,{title:t({en:`Unfriend ${s.length} selected friends`,vi:`Hu·ª∑ k·∫øt b·∫°n ${s.length} ng∆∞·ªùi ƒë∆∞·ª£c ch·ªçn`}),description:t({en:"Are you sure to unfriend these friends?",vi:"B·∫°n c√≥ ch·∫Øc mu·ªën hu·ª∑ k·∫øt b·∫°n nh·ªØng ng∆∞·ªùi n√†y?"}),onConfirm:()=>qn(s),okText:t({en:"Yes",vi:"Bye bye"}),cancelText:t({en:"No",vi:"Tha"}),children:i.jsx(j,{danger:!0,icon:i.jsx("i",{className:"fa-solid fa-trash-can"}),children:s.length})})}):null]}):null})]})};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[i.jsxs(he,{align:"middle",style:{margin:"16px"},children:[i.jsx(Fe,{level:3,style:{margin:0},children:t({en:"Friends manager",vi:"Qu·∫£n l√Ω b·∫°n b√®"})}),i.jsx(X,{style:{marginLeft:"10px",fontWeight:"bold",color:"#888"},children:S.length})]}),i.jsx(te,{ref:K,data:S,columns:Wn,size:"small",searchable:!0,selectable:!0,keyExtractor:n=>n.uid,style:{flex:1,maxHeight:"100%"},renderTitle:Gn})]})}export{nt as default};
