import{aG as C,aI as s,bo as b,aA as v}from"./index-CoQJRaJc.js";import{b as y,e as j,t as k}from"./MyApp-Bv9Tdnls.js";function M(){const{ti:u}=C(),{message:e,notification:d}=y();return{onClickBulkActions:async({data:n,key:i,actionFn:l,loadingText:p,successText:f,successDesc:c,successDescItem:g,waitTime:o=[2e3,5e3],requireVIP:h=!0})=>{if(h&&!await j()||!(n!=null&&n.length))return;const r=i+":waiting";k(i);let x=!1,a=[];for(let t=0;t<n.length&&(e.destroy(r),e.loading({key:i,content:s.jsxs(s.Fragment,{children:[p(n[t],t,n)+" ("+(t+1)+"/"+n.length+")",s.jsx("br",{}),s.jsx("i",{children:u({en:"Click to stop",vi:"Bấm để dừng"})})]}),duration:0,onClick:()=>{e.loading({key:i,content:u({en:"Stopping...",vi:"Đang dừng..."}),duration:0}),x=!0}}),await l(n[t])&&a.push(n[t]),!x);t++)if(o&&t<n.length-1){const A=b(o[0]||o,o[1]||o);await v(A,w=>{e.loading({key:r,content:u({en:"Sleeping "+Math.round(w/1e3)+"s",vi:"Đang đợi "+Math.round(w/1e3)+"s"}),duration:0})})}e.destroy(i),e.destroy(r),d.open({type:"success",duration:0,message:f(a,n)+` (${a.length} / ${n.length})`,description:g?s.jsx("ol",{style:{maxHeight:200,overflowY:"auto",whiteSpace:"pre-wrap"},children:a.map((t,m)=>s.jsx("li",{children:g(t)},m))}):c==null?void 0:c(a,n)})},onClickAction:async({key:n,id:i,record:l,loadingText:p,successText:f,failedText:c,actionFn:g,onSuccess:o,requireVIP:h=!1})=>{if(h&&!await j())return!1;k(n),n+=":"+i;try{if(e.loading({key:n,content:p(l),duration:0}),await g())return o==null||o(),e.success({key:n,content:f(l)}),!0;throw new Error("Facebook response error")}catch(r){return e.destroy(n),d.open({type:"error",message:c(l),description:r.message}),!1}finally{}}}}export{M as u};
