const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VideoViewer-C4IhB--n.js","./index-DpaN6uAl.js","./index-9SBFHPtm.css","./videos-BW8p7RVs.js","./MyApp-DT7Mp6Ol.js","./VideoWithMuted-Dfoz8Cd4.js","./PostMediaset-Dn84OCDV.js","./Collection-D1oeBoza.js","./index-BFLxmSeF.js","./file-download-C8N_4s74.js","./index-Ddgbd1e2.js","./Dropdown-Cjl61cci.js","./PurePanel-CEQRX1Up.js","./index-Dck10nsq.js","./index-BZSDr9-Z.js","./index-DaSB5I0t.js","./EyeOutlined-B8SRD3zh.js","./SearchOutlined-DiRblE_s.js","./index-DT-2K0c2.js","./Pagination-gvKXwaTG.js","./useBreakpoint-B2SKj2Kc.js","./responsiveObserver-ClmlXGh5.js","./index-C7pE-BUF.js","./row-Cpqffg62.js","./index-B5hXcU25.js","./icons-B6ko5o9I.js","./index-CZgQ3Pzk.js"])))=>i.map(i=>d[i]);
import{aH as Q,b1 as J,r as L,b8 as w,aJ as t,bl as D,ba as G,b0 as Y,aL as p,b9 as Z,$ as R,aS as M,b6 as j}from"./index-DpaN6uAl.js";import{b as ee,c as O,P as T,t as d,S as h,d as te,g as ne,B as ie,C as I,T as c,a as se,D as B,h as oe,E as ae}from"./MyApp-DT7Mp6Ol.js";import{d as re}from"./dayjs.min-D__FmMzI.js";import le from"./MyTable-DiWPHZFQ.js";import{E as ce}from"./ExportButton-DDjcedOC.js";import{A as de}from"./index-BfITeoTr.js";import{I as F}from"./index-BN3srwb7.js";import{C as he}from"./index-H3jvmfVn.js";import{T as y}from"./index-DaSB5I0t.js";import{P as me}from"./index-A1kUfCEP.js";import{R as ge}from"./row-Cpqffg62.js";import{I as xe}from"./index-BZSDr9-Z.js";import{D as pe}from"./index-DoEmcDz7.js";import{S as b}from"./index-C7pE-BUF.js";import"./index-BFLxmSeF.js";import"./Table-snc4g0EO.js";import"./addEventListener-BsD1Ca8X.js";import"./index-Dck10nsq.js";import"./index-Ddgbd1e2.js";import"./Dropdown-Cjl61cci.js";import"./PurePanel-CEQRX1Up.js";import"./useBreakpoint-B2SKj2Kc.js";import"./responsiveObserver-ClmlXGh5.js";import"./Pagination-gvKXwaTG.js";import"./SearchOutlined-DiRblE_s.js";import"./file-download-C8N_4s74.js";import"./index-Ds18S18h.js";import"./EyeOutlined-B8SRD3zh.js";import"./index-bF29bHdo.js";const ue=R.lazy(()=>M(()=>import("./VideoViewer-C4IhB--n.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),ye=R.lazy(()=>M(()=>import("./PostMediaset-Dn84OCDV.js"),__vite__mapDeps([6,1,2,7,8,9,4,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,3,25,5,26]),import.meta.url));function $e(){const{ti:i}=Q(),{message:v}=ee(),A=J(),[m,f]=O("MyPosts.postFilters",{uid:"",privacy:T.ALL,omitPinnedPost:!0,beforeTime:null,taggedInOnly:!1,postedByOthers:null}),[u,k]=O("MyPosts.posts",[]),[N,P]=O("MyPosts.loading",!1),E=L.useMemo(()=>u.map((n,e)=>({...n,recent:e})),[u]);L.useEffect(()=>{d("Posts:onLoad")},[]);const U=async()=>{d("Posts:onClickReload"),P(!0);const n=await B(m);n.length?(k(n),console.log(n)):v.info(i({en:"No data found",vi:"Kh√¥ng c√≥ d·ªØ li·ªáu"})),P(!1)},V=async()=>{var e;d("Posts:onClickLoadMore"),P(!0);const n=await B({...m,cursor:(e=u[u.length-1])==null?void 0:e.cursor});n!=null&&n.length?(k(o=>[...o,...n]),console.log(n),v.success({content:i({en:"Load more success ",vi:"T·∫£i th√™m th√†nh c√¥ng "})+n.length})):v.info({content:i({en:"No more data",vi:"Kh√¥ng c√≥ d·ªØ li·ªáu"})}),P(!1)},W=(n,e)=>{d("Posts:onChangeTime"),f(o=>j(o,s=>{const a=Array.isArray(e)?e[0]:e;s.beforeTime=new Date(a).getTime(),console.log(e,s.beforeTime)}))},S=n=>{d("Posts:onChangePostedBy:"+n),f(e=>j(e,o=>{o.postedByOthers=n}))},z=n=>{d("Posts:onChangePrivacy:"+n),f(e=>j(e,o=>{o.privacy=n}))},X=()=>{d("Posts:onToggleTaggedOnly"),f(n=>j(n,e=>{e.taggedInOnly=!e.taggedInOnly}))},q=async n=>{const e=n.target.value;if(d("Posts:onChangeUid:"+e),f(o=>j(o,s=>{s.uid=e})),!/^\d+$/.test(e)){const o=await oe(e);f(s=>j(s,a=>{a.uid=o}))}},H=async n=>{const e="Posts:onDeletePost";d(e),v.loading({key:e,content:i({en:"Deleting post..",vi:"ƒêang xo√° b√†i vi·∫øt.."}),duration:0}),await ae(n.story_id)?(v.success({key:e,content:i({en:"Post deleted",vi:"Xo√° b√†i vi·∫øt th√†nh c√¥ng"})}),k(s=>s.filter(a=>a.story_id!==n.story_id))):v.error({key:e,content:i({en:"Post not deleted",vi:"Kh√¥ng xo√° ƒë∆∞·ª£c b√†i vi·∫øt"})})},$=[{title:"#",key:"recent",dataIndex:"recent",sorter:(n,e)=>n.recent-e.recent,render:(n,e,o)=>e.recent+1,width:70,align:"center"},{title:i({en:"Actor",vi:"Ng∆∞·ªùi ƒëƒÉng"}),key:"actor",dataIndex:"actor",onSearch:(n,e,o)=>{var s,a;return w(n,(s=o==null?void 0:o.actor)==null?void 0:s.name)||w(n,(a=o==null?void 0:o.actor)==null?void 0:a.id)},render:(n,e,o)=>{var s,a,r,l,g,x;return t.jsxs(h,{style:{maxWidth:300},children:[t.jsx(de,{shape:"square",src:t.jsx(F,{src:te((s=e.actor)==null?void 0:s.id),fallback:(a=e.actor)==null?void 0:a.avatar}),size:50}),t.jsxs(h,{direction:"vertical",size:0,children:[t.jsx("a",{href:((r=e.actor)==null?void 0:r.url)||ne((l=e.actor)==null?void 0:l.id),target:"_blank",children:t.jsx("b",{children:(g=e.actor)==null?void 0:g.name})}),t.jsx("span",{style:{opacity:.5},children:(x=e.actor)==null?void 0:x.id})]})]})},width:250},{title:i({en:"Media",vi:"·∫¢nh/Video"}),key:"media",dataIndex:"media",render:(n,e,o)=>{var l;const s=(l=e.content)==null?void 0:l.attachments,a=s.length===1,r=s.length===1&&s[0].type==="Video";return(s==null?void 0:s.length)>0?t.jsx(ie.Ribbon,{text:s.length,style:{display:s.length>1?"block":"none"},children:t.jsx(F,{src:s[0].thumbnail,style:{objectFit:"cover",height:150,width:210,borderRadius:10},preview:a&&!r?!0:{destroyOnClose:!0,imageRender:()=>r?t.jsx(ue,{info:{id:s[0].id}}):t.jsx(he,{style:{maxWidth:"90vw",maxHeight:"90vh",alignItems:"center",overflowY:"auto",overflowX:"hidden",padding:20,borderRadius:10},children:t.jsx(ye,{target:e.actor,postId:e.url})}),toolbarRender:()=>null}})}):"-"},filters:[{text:i({en:"1 Video",vi:"1 Video"}),value:"video"},{text:i({en:"Has media",vi:"C√≥ ·∫£nh/video"}),value:"has-media"},{text:i({en:"Multi media",vi:"Nhi·ªÅu ·∫£nh/video"}),value:"multi-media"}],onFilter:(n,e)=>{var o,s,a,r,l,g,x,C,_;if(n==="video")return((s=(o=e.content)==null?void 0:o.attachments)==null?void 0:s.length)===1&&((l=(r=(a=e.content)==null?void 0:a.attachments)==null?void 0:r[0])==null?void 0:l.type)==="Video";if(n==="has-media")return((x=(g=e.content)==null?void 0:g.attachments)==null?void 0:x.length)>0;if(n==="multi-media")return((_=(C=e.content)==null?void 0:C.attachments)==null?void 0:_.length)>1},width:200,align:"right"},{title:i({en:"Content",vi:"N·ªôi dung"}),key:"content",dataIndex:"content",onSearch:(n,e,o)=>{var s;return[(s=o.content)==null?void 0:s.text,o.message,o.title,o.summary].filter(Boolean).some(a=>w(n,a))},render:(n,e,o)=>{var r,l,g,x;const s=e.message||e.title||e.summary,a=((r=e.content)==null?void 0:r.text)||((x=(g=(l=e.content)==null?void 0:l.attachments)==null?void 0:g.find(C=>C.title))==null?void 0:x.title);return t.jsxs(h,{direction:"vertical",style:{maxWidth:400},children:[(s==null?void 0:s.length)&&t.jsx(y.Text,{children:D(s,150)}),t.jsx(y.Text,{type:"secondary",children:D(a,150)})]})},width:"auto"},{title:i({en:"Posted time",vi:"ƒêƒÉng l√∫c"}),key:"date",dataIndex:"date",sorter:(n,e)=>n.creation_time-e.creation_time,render:(n,e,o)=>t.jsxs(h,{direction:"vertical",size:0,children:[t.jsxs(y.Text,{children:[G(new Date(e.creation_time))," ",i({en:" ago",vi:"tr∆∞·ªõc"})]}),t.jsx(y.Text,{type:"secondary",children:Y(e.creation_time)})]})},{title:i({en:"Privacy",vi:"Quy·ªÅn ri√™ng t∆∞"}),key:"privacy",dataIndex:"privacy",render:(n,e,o)=>{const s=e.privacy.scope,a=e.privacy.description;return t.jsxs(h,{direction:"vertical",size:0,children:[t.jsx(y.Text,{children:i(I[s])}),a&&s===T.CUSTOM&&t.jsx(y.Text,{type:"secondary",children:a})]})},filters:Object.keys(T).map(n=>({text:i(I[n])+" ("+u.filter(e=>e.privacy.scope===n).length+")",value:n})),onFilter:(n,e)=>e.privacy.scope===n,width:150},{title:i({en:"Action",vi:"H√†nh ƒë·ªông"}),key:"action",dataIndex:"action",render:(n,e,o)=>t.jsxs(h.Compact,{children:[e.can_delete&&t.jsx(c,{title:i({en:"Delete",vi:"Xo√°"}),children:t.jsx(me,{title:i({en:"Are you sure to delete this post?",vi:"B·∫°n c√≥ ch·∫Øc mu·ªën xo√° b√†i vi·∫øt n√†y?"}),onConfirm:()=>H(e),children:t.jsx(p,{danger:!0,icon:t.jsx("i",{className:"fa-solid fa-trash"})})})}),t.jsx(c,{title:i({en:"Open in Bulk downloader",vi:"M·ªü trong T·∫£i h√†ng lo·∫°t"}),children:t.jsx(p,{onClick:()=>{A("/bulk-downloader",{state:{targetId:e.url,platform:Z.Facebook}})},icon:t.jsx("i",{className:"fa-solid fa-download"})})}),t.jsx(c,{title:i({en:"View on Facebook",vi:"Xem b√†i vi·∫øt"}),children:t.jsx(p,{onClick:()=>window.open(e.url,"_blank"),icon:t.jsx("i",{className:"fa-solid fa-up-right-from-square"})})})]}),width:150}],K=n=>{const e=n!=null&&n.length?n:u;return t.jsxs(t.Fragment,{children:[t.jsxs(h.Compact,{children:[t.jsx(p,{loading:N,icon:t.jsx("i",{className:"fa-solid fa-play"}),onClick:V,children:i(N?{en:"Loading..",vi:"ƒêang t·∫£i.."}:{en:"Load more",vi:"T·∫£i th√™m"})}),t.jsx(ce,{data:n.length?n:u,options:[{key:"json",label:".json",prepareData:o=>({fileName:"posts.json",data:JSON.stringify(o,null,4)})}]})]}),t.jsxs(h.Compact,{children:[t.jsx(c,{title:i({en:"Coming soon",vi:"S·∫Øp c√≥"}),children:t.jsxs(p,{disabled:!0,danger:!0,icon:t.jsx("i",{className:"fa-solid fa-trash"}),children:[i({en:"Delete",vi:"Xo√°"})," ",e.length]})}),t.jsx(c,{title:i({en:"Coming soon",vi:"S·∫Øp c√≥"}),children:t.jsxs(p,{disabled:!0,icon:t.jsx("i",{className:"fa-solid fa-lock"}),children:[i({en:"Change privacy",vi:"S·ª≠a quy·ªÅn ri√™ng t∆∞"})," ",e.length]})})]})]})};return t.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},children:[t.jsxs(ge,{align:"middle",style:{margin:"16px"},children:[t.jsx(y.Title,{level:3,style:{margin:0},children:i({en:"Posts manager",vi:"Qu·∫£n l√Ω b√†i vi·∫øt"})}),t.jsx(se,{color:"error",style:{marginLeft:10},children:i({en:"üöß Work in progress",vi:"üöß ƒêang ph√°t tri·ªÉn"})})]}),t.jsxs(h.Compact,{style:{marginBottom:10,marginLeft:5},children:[t.jsx(c,{title:i({en:"FB User",vi:"Ng∆∞·ªùi d√πng FB"}),children:t.jsx(xe,{placeholder:i({en:"UID/URL",vi:"UID/URL"}),value:m.uid,onChange:q,style:{maxWidth:150}})}),t.jsx(c,{title:i({en:"Posted before time",vi:"ƒêƒÉng tr∆∞·ªõc ng√†y"}),children:t.jsx(pe,{value:m.beforeTime?re(m.beforeTime):null,onChange:W})}),t.jsx(c,{title:i({en:"Posted by",vi:"ƒêƒÉng b·ªüi"}),children:t.jsxs(b,{style:{minWidth:120},value:m.postedByOthers,onChange:S,children:[t.jsx(b.Option,{value:null,children:i({en:"All",vi:"T·∫•t c·∫£"})}),t.jsxs(b.Option,{value:!1,children:["üìå ",i({en:"Owner",vi:"Ch√≠nh ch·ªß"})]}),t.jsxs(b.Option,{value:!0,children:["üë§ ",i({en:"Others",vi:"Ng∆∞·ªùi kh√°c"})]})]})}),t.jsx(c,{title:i({en:"Privacy",vi:"Quy·ªÅn ri√™ng t∆∞"}),children:t.jsx(b,{style:{minWidth:120},value:m.privacy,onChange:z,children:Object.keys(T).map(n=>t.jsx(b.Option,{value:n,children:i(I[n])},n))})}),t.jsx(c,{title:i({en:"Tagged only",vi:"Ch·ªâ b√†i vi·∫øt ƒë∆∞·ª£c g·∫Øn th·∫ª"}),children:t.jsx(p,{icon:t.jsx("i",{className:"fa-solid fa-user-tag"}),type:m.taggedInOnly?"primary":"default",onClick:X,children:i({en:"Tagged only",vi:"G·∫Øn th·∫ª"})})}),t.jsx(p,{type:"primary",onClick:U,icon:t.jsx("i",{className:"fa-solid fa-filter"}),children:i({en:"Apply",vi:"L·ªçc"})})]}),t.jsx(le,{data:E,columns:$,searchable:!0,selectable:!0,keyExtractor:n=>n.id,renderTitle:K})]})}export{$e as default};
