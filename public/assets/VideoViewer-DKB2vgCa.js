import{r as a,aw as s,ay as f}from"./index-BDuAyY7p.js";import{A as k,V as w}from"./VideoWithMuted-CAb7uOab.js";import{u as A,ax as x,S as y,T as g,ay as j,t as F}from"./MyApp-IVuV4tYN.js";function M({info:i,style:S,videoStyle:z,buttonTop:u=!1}){var h;const{ti:V}=A(),[t,o]=a.useState(null),[l,C]=a.useState({}),[n,R]=a.useState(0),d=(t==null?void 0:t.source)||i.source,c=a.useRef(!1);a.useEffect(()=>{var e;(e=i.variants)!=null&&e.length&&!Object.keys(l).length&&!c.current&&(c.current=!0,Promise.all(i.variants.map(r=>x(r.source).then(E=>{C(b=>({...b,[r.id]:E}))}).catch(()=>{console.log("ERROR get size",r)}))).finally(()=>{c.current=!1}))},[l,i.variants]),a.useEffect(()=>{i.source&&x(i.source).then(e=>{R(e)})},[i.source]);const m=s.jsxs(y.Compact,{children:[s.jsx(g,{title:n?j(n,1):"",children:s.jsx(f,{type:t?"default":"primary",onClick:()=>o(null),children:V({en:"Default",vi:"Mặc định"})})}),(h=i.variants)==null?void 0:h.map((e,r)=>s.jsx(g,{title:(e.isAudio?"":e.width+"x"+e.height)+(l[e.id]?" - "+j(l[e.id],1):""),children:s.jsxs(f,{type:(t==null?void 0:t.id)===e.id?"primary":"default",onClick:()=>{F("VideoViewer:onChangeVariant:"+(e.qualityLabel||e.mimeType)),o(e)},icon:e.isAudio?s.jsx("i",{className:"fa-solid fa-music"}):null,children:[e.qualityClass," ",e.qualityLabel||e.mimeType]})},e.id))]});return s.jsxs(y,{direction:"vertical",style:{padding:15,borderRadius:10,backgroundColor:"#222",justifyContent:"center",alignItems:"center",...S},children:[u&&m,t!=null&&t.isAudio?s.jsx(k,{src:d}):s.jsx(w,{src:d,style:{maxWidth:"80vw",maxHeight:"80vh",...z}}),!u&&m]})}export{M as default};
